framework:
    messenger:
        failure_transport: failed
        transports:
            sync: 'sync://'
            async:
                dsn: "%env(default:sync://:string:RABBITMQ_DSN)%"
                options:
                    queues: ["async"]
            high_priority:
                dsn: "%env(default:sync://:string:RABBITMQ_DSN)%"
                options:
                    queues: ["high_priority"]
            notifications:
                dsn: "%env(default:sync://:string:RABBITMQ_DSN)%"
                options:
                    queues: ["notifications"]
            failed: 'doctrine://default?queue_name=failed'
        routing:
            'App\Message\Command\Payment\*': high_priority
            'App\Message\Command\*': async
            'App\Message\Query\*': sync
            'App\Message\Event\*': notifications
